from led_matrix.led_matrix import LedMatrix
from pyfirmata import Arduino
from polyglot.text import Text


usb_port = '/dev/ttyACM0'
data_in = 2
load = 4
clock = 3

smile_face = [
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 1, 0, 0, 1, 1, 0],
    [0, 1, 1, 0, 0, 1, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 0, 0, 0, 0, 1, 0],
    [0, 1, 1, 1, 1, 1, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0]
]

sad_face = [
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 1, 0, 0, 1, 1, 0],
    [0, 1, 1, 0, 0, 1, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 1, 1, 1, 1, 1, 0],
    [0, 1, 0, 0, 0, 0, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0]
]

neutral_face = [
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 1, 0, 0, 1, 1, 0],
    [0, 1, 1, 0, 0, 1, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 1, 1, 1, 1, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0]
]


def main():
    board = Arduino(usb_port)
    matrix = LedMatrix(board, data_in, load, clock)
    matrix.setup()

    try:
        text = input('Digite algo: ')
        text = Text(text)
        polarity = text.polarity
    except Exception as error:
        print(error)
    else:
        if polarity == 1:
            matrix.draw_matrix(smile_face)
        elif polarity == -1:
            matrix.draw_matrix(sad_face)
        else:
            matrix.draw_matrix(neutral_face)


if __name__ == '__main__':
    main()
